<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="Jose Coelho"><meta name=description content="Ramblings about software engineering"><meta name=keywords content="go,golang,kubernetes,ansible,chef,kafka,docker,containers"><link rel=canonical href=https://www.jacoelho.com/blog/2021/06/postgresql-uuid-vs-text/><title>PostgreSQL - UUID vs TEXT :: Posts</title><link rel=stylesheet href=https://www.jacoelho.com/css/main.min.6f3353616359b0fe4cfe1d29dc41b46980dd1459838e2e6175f34881197cc945.css integrity="sha256-bzNTYWNZsP5M/h0p3EG0aYDdFFmDji5hdfNIgRl8yUU=" crossorigin=anonymous><meta itemprop=name content="PostgreSQL - UUID vs TEXT"><meta itemprop=description content="In PostgreSQL one can represent UUID as UUID, TEXT or VARCHAR built-in types.
Which type represents a UUID more efficiently? Mainly in the JSONB context? My gut feeling says built-in type UUID is way better.
One trap with using TEXT is trying to compare different cases with equals:
select 'ef9f94da-98ef-49fa-8224-32f3e1f592b3' = 'EF9F94DA-98EF-49FA-8224-32F3E1F592B3' as equal; equal ------- f Checking the relevant RFC4122 section:
Each field is treated as an integer and has its value printed as a zero-filled hexadecimal digit string with the most significant digit first. The hexadecimal values &#34;a&#34; through &#34;f&#34; are output as lower case characters and are case insensitive on input. Which the UUID type correctly handles:"><meta itemprop=datePublished content="2021-06-05T10:00:00+00:00"><meta itemprop=dateModified content="2021-06-05T10:00:00+00:00"><meta itemprop=wordCount content="2123"><meta itemprop=keywords content="Go,Golang,Postgresql"><meta property="og:url" content="https://www.jacoelho.com/blog/2021/06/postgresql-uuid-vs-text/"><meta property="og:site_name" content="Posts"><meta property="og:title" content="PostgreSQL - UUID vs TEXT"><meta property="og:description" content="In PostgreSQL one can represent UUID as UUID, TEXT or VARCHAR built-in types.
Which type represents a UUID more efficiently? Mainly in the JSONB context? My gut feeling says built-in type UUID is way better.
One trap with using TEXT is trying to compare different cases with equals:
select 'ef9f94da-98ef-49fa-8224-32f3e1f592b3' = 'EF9F94DA-98EF-49FA-8224-32F3E1F592B3' as equal; equal ------- f Checking the relevant RFC4122 section:
Each field is treated as an integer and has its value printed as a zero-filled hexadecimal digit string with the most significant digit first. The hexadecimal values &#34;a&#34; through &#34;f&#34; are output as lower case characters and are case insensitive on input. Which the UUID type correctly handles:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-06-05T10:00:00+00:00"><meta property="article:modified_time" content="2021-06-05T10:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="PostgreSQL - UUID vs TEXT"><meta name=twitter:description content="In PostgreSQL one can represent UUID as UUID, TEXT or VARCHAR built-in types.
Which type represents a UUID more efficiently? Mainly in the JSONB context? My gut feeling says built-in type UUID is way better.
One trap with using TEXT is trying to compare different cases with equals:
select 'ef9f94da-98ef-49fa-8224-32f3e1f592b3' = 'EF9F94DA-98EF-49FA-8224-32F3E1F592B3' as equal; equal ------- f Checking the relevant RFC4122 section:
Each field is treated as an integer and has its value printed as a zero-filled hexadecimal digit string with the most significant digit first. The hexadecimal values &#34;a&#34; through &#34;f&#34; are output as lower case characters and are case insensitive on input. Which the UUID type correctly handles:"><meta property="article:published_time" content="2021-06-05 10:00:00 +0000 UTC"><meta property="article:section" content="go"><meta property="article:section" content="golang"><meta property="article:section" content="postgresql"></head><body><header class=header><div class=container><div class=header-inner><a href=https://www.jacoelho.com/ class=logo>Jose Coelho</a><nav class=nav><button class=menu-trigger aria-label="Toggle menu" aria-expanded=false>
<svg width="24" height="24"><use href="https://www.jacoelho.com/icons.svg#menu"/></svg></button><div class=nav-menu><ul class=menu><li class=menu-item><a href=https://www.jacoelho.com/about/>About</a></li></ul><button class=theme-toggle aria-label="Toggle theme">
<svg class="theme-icon-light" width="20" height="20"><use href="https://www.jacoelho.com/icons.svg#sun"/></svg>
<svg class="theme-icon-dark" width="20" height="20"><use href="https://www.jacoelho.com/icons.svg#moon"/></svg>
</button>
<a href=https://www.jacoelho.com/index.xml class=rss-link target=_blank rel=noopener aria-label=RSS><svg width="20" height="20"><use href="https://www.jacoelho.com/icons.svg#rss"/></svg></a></div></nav></div></div></header><div class=container><div class=content><main class=post><article><header class=post-header><h1 class=post-title>PostgreSQL - UUID vs TEXT</h1></header><div class=post-content><p>In PostgreSQL one can represent <a href=https://en.wikipedia.org/wiki/Universally_unique_identifier>UUID</a> as <code>UUID</code>, <code>TEXT</code> or <code>VARCHAR</code> built-in types.</p><h3 id=which-type-represents-a-uuid-more-efficiently-mainly-in-the-jsonb-context>Which type represents a UUID more efficiently? Mainly in the JSONB context?</h3><p>My gut feeling says built-in type <code>UUID</code> is way better.</p><p>One trap with using <code>TEXT</code> is trying to compare different cases with equals:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=s1>&#39;ef9f94da-98ef-49fa-8224-32f3e1f592b3&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;EF9F94DA-98EF-49FA-8224-32F3E1F592B3&#39;</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>equal</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>equal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=n>f</span><span class=w>
</span></span></span></code></pre></div><p>Checking the relevant <a href=https://datatracker.ietf.org/doc/html/rfc4122#section-3>RFC4122</a> section:</p><pre tabindex=0><code>Each field is treated as an integer and has its value printed as a
zero-filled hexadecimal digit string with the most significant
digit first.  The hexadecimal values &#34;a&#34; through &#34;f&#34; are output as
lower case characters and are case insensitive on input.
</code></pre><p>Which the <code>UUID</code> type correctly handles:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=s1>&#39;ef9f94da-98ef-49fa-8224-32f3e1f592b3&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;EF9F94DA-98EF-49FA-8224-32F3E1F592B3&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>equal</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>equal</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=n>t</span><span class=w>
</span></span></span></code></pre></div><p>Looking at type size comparison:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>pg_column_size</span><span class=p>(</span><span class=s1>&#39;00000000-0000-0000-0000-000000000000&#39;</span><span class=p>::</span><span class=n>UUID</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>uuid</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>pg_column_size</span><span class=p>(</span><span class=s1>&#39;00000000-0000-0000-0000-000000000000&#39;</span><span class=p>::</span><span class=nb>TEXT</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nb>text</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>pg_column_size</span><span class=p>(</span><span class=s1>&#39;00000000-0000-0000-0000-000000000000&#39;</span><span class=p>::</span><span class=nb>VARCHAR</span><span class=p>(</span><span class=mi>36</span><span class=p>))</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nb>char</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>uuid</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nb>text</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=nb>char</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>------+------+------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w>   </span><span class=mi>16</span><span class=w> </span><span class=o>|</span><span class=w>   </span><span class=mi>40</span><span class=w> </span><span class=o>|</span><span class=w>   </span><span class=mi>40</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=mi>1</span><span class=w> </span><span class=k>row</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><p>In PostgreSQL <code>text</code> and <code>varchar</code> are the same: when using <code>varchar(36)</code> we are defining a <code>text</code> column with a check constraint of 36 characters.</p><p>Managing <code>UUID</code> as a proper <code>UUID</code> in PostgreSQL seems like a good idea, as PostgreSQL represents it in 128 bits (or 16 bytes).</p><h4 id=what-does-the-query-planner-say>What does the query planner say?</h4><p>Generating some data to run comparisons:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>drop</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>a</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>drop</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>b</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>drop</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=k>c</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=n>unlogged</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w>   </span><span class=n>uuid</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>data</span><span class=w> </span><span class=n>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=n>unlogged</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w>   </span><span class=n>uuid</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>data</span><span class=w> </span><span class=n>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=n>unlogged</span><span class=w> </span><span class=k>table</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>id</span><span class=w>   </span><span class=n>uuid</span><span class=w> </span><span class=k>primary</span><span class=w> </span><span class=k>key</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>data</span><span class=w> </span><span class=n>json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>with</span><span class=w> </span><span class=n>insert_a</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>a_id</span><span class=p>,</span><span class=w> </span><span class=n>jsonb_build_object</span><span class=p>(</span><span class=s1>&#39;foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;foobar&#39;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>gen_random_uuid</span><span class=p>()</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>a_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>generate_series</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=n>e4</span><span class=p>))</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>data</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>on</span><span class=w> </span><span class=n>conflict</span><span class=w> </span><span class=k>do</span><span class=w> </span><span class=k>nothing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>returning</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>insert_b</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=n>b</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>b_id</span><span class=p>,</span><span class=w> </span><span class=n>jsonb_build_object</span><span class=p>(</span><span class=s1>&#39;foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;foobar&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>,</span><span class=w> </span><span class=n>a_id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>from</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>gen_random_uuid</span><span class=p>()</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>b_id</span><span class=w>  </span><span class=k>from</span><span class=w> </span><span class=n>generate_series</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=n>e4</span><span class=p>))</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>data</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>a_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>insert_a</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>data_a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>on</span><span class=w> </span><span class=n>conflict</span><span class=w> </span><span class=k>do</span><span class=w> </span><span class=k>nothing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>returning</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>),</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>insert_c</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>insert</span><span class=w> </span><span class=k>into</span><span class=w> </span><span class=k>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>select</span><span class=w> </span><span class=n>c_id</span><span class=p>,</span><span class=w> </span><span class=n>jsonb_build_object</span><span class=p>(</span><span class=s1>&#39;foo&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;foobar&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>,</span><span class=w> </span><span class=n>b_id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>from</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>gen_random_uuid</span><span class=p>()</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>c_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>generate_series</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=w> </span><span class=mi>1</span><span class=n>e4</span><span class=p>))</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=k>data</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=p>(</span><span class=k>select</span><span class=w> </span><span class=n>id</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>b_id</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>insert_b</span><span class=p>)</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=n>data_b</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=k>on</span><span class=w> </span><span class=n>conflict</span><span class=w> </span><span class=k>do</span><span class=w> </span><span class=k>nothing</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=n>returning</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>insert_c</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>With this setup the following number of rows were inserted:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>union</span><span class=w> </span><span class=k>all</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>b</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>union</span><span class=w> </span><span class=k>all</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>c</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=k>count</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=mi>10000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=mi>10000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=mi>10000</span><span class=w>
</span></span></span></code></pre></div><h4 id=creating-a-baseline>Creating a baseline:</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>explain</span><span class=w> </span><span class=k>analyze</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                            </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-----------------------------------------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=n>Hash</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>273</span><span class=p>.</span><span class=mi>67</span><span class=p>..</span><span class=mi>757</span><span class=p>.</span><span class=mi>66</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>2500</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>192</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>157</span><span class=p>.</span><span class=mi>340</span><span class=p>..</span><span class=mi>299</span><span class=p>.</span><span class=mi>387</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>184</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>34</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>014</span><span class=p>..</span><span class=mi>67</span><span class=p>.</span><span class=mi>927</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>273</span><span class=p>.</span><span class=mi>04</span><span class=p>..</span><span class=mi>273</span><span class=p>.</span><span class=mi>04</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>158</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>157</span><span class=p>.</span><span class=mi>255</span><span class=p>..</span><span class=mi>157</span><span class=p>.</span><span class=mi>312</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>1024</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>9</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>8</span><span class=p>.</span><span class=mi>31</span><span class=p>..</span><span class=mi>273</span><span class=p>.</span><span class=mi>04</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>158</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>149</span><span class=p>..</span><span class=mi>157</span><span class=p>.</span><span class=mi>268</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>234</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>025</span><span class=p>..</span><span class=mi>74</span><span class=p>.</span><span class=mi>235</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>8</span><span class=p>.</span><span class=mi>30</span><span class=p>..</span><span class=mi>8</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>091</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>110</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>1024</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>9</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>c_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>8</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>045</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>064</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Planning</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>175</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Execution</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>299</span><span class=p>.</span><span class=mi>458</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><p>Setting timing on:</p><pre tabindex=0><code> \timing
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>-</span><span class=p>[</span><span class=w> </span><span class=n>RECORD</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>]</span><span class=c1>--------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=mi>685</span><span class=n>c304c</span><span class=o>-</span><span class=mi>2</span><span class=n>ce0</span><span class=o>-</span><span class=mi>4</span><span class=n>e08</span><span class=o>-</span><span class=mi>8</span><span class=n>b97</span><span class=o>-</span><span class=mi>4</span><span class=n>b32d6dd4e78</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;b&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;e907b6c8-a41a-47d2-b312-4f118d69c030&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>e907b6c8</span><span class=o>-</span><span class=n>a41a</span><span class=o>-</span><span class=mi>47</span><span class=n>d2</span><span class=o>-</span><span class=n>b312</span><span class=o>-</span><span class=mi>4</span><span class=n>f118d69c030</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;a&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>acfa1f62</span><span class=o>-</span><span class=n>c271</span><span class=o>-</span><span class=mi>4</span><span class=n>ad4</span><span class=o>-</span><span class=mi>9</span><span class=n>daf</span><span class=o>-</span><span class=mi>818</span><span class=n>c4921fb0e</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>8</span><span class=p>.</span><span class=mi>473</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><p>Another interesting query to check is getting all <code>a</code> relations:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>explain</span><span class=w> </span><span class=k>analyze</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                            </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-----------------------------------------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=k>Aggregate</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>809</span><span class=p>.</span><span class=mi>91</span><span class=p>..</span><span class=mi>809</span><span class=p>.</span><span class=mi>92</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>750</span><span class=p>.</span><span class=mi>923</span><span class=p>..</span><span class=mi>751</span><span class=p>.</span><span class=mi>022</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>269</span><span class=p>.</span><span class=mi>67</span><span class=p>..</span><span class=mi>803</span><span class=p>.</span><span class=mi>66</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>2500</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>320</span><span class=p>.</span><span class=mi>674</span><span class=p>..</span><span class=mi>618</span><span class=p>.</span><span class=mi>406</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>234</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>63</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>014</span><span class=p>..</span><span class=mi>68</span><span class=p>.</span><span class=mi>143</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>269</span><span class=p>.</span><span class=mi>04</span><span class=p>..</span><span class=mi>269</span><span class=p>.</span><span class=mi>04</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>320</span><span class=p>.</span><span class=mi>630</span><span class=p>..</span><span class=mi>320</span><span class=p>.</span><span class=mi>686</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>16384</span><span class=w> </span><span class=p>(</span><span class=n>originally</span><span class=w> </span><span class=mi>1024</span><span class=p>)</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>(</span><span class=n>originally</span><span class=w> </span><span class=mi>1</span><span class=p>)</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>597</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>4</span><span class=p>.</span><span class=mi>32</span><span class=p>..</span><span class=mi>269</span><span class=p>.</span><span class=mi>04</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>151</span><span class=p>..</span><span class=mi>242</span><span class=p>.</span><span class=mi>404</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>234</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>020</span><span class=p>..</span><span class=mi>70</span><span class=p>.</span><span class=mi>547</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=p>..</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>067</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>086</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>1024</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>9</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=k>Only</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>a_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>023</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>040</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                 </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                 </span><span class=n>Heap</span><span class=w> </span><span class=n>Fetches</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Planning</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>169</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Execution</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>751</span><span class=p>.</span><span class=mi>099</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=mi>16</span><span class=w> </span><span class=k>rows</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>752</span><span class=p>.</span><span class=mi>163</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>-</span><span class=p>[</span><span class=w> </span><span class=n>RECORD</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>count</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>19999</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>53</span><span class=p>.</span><span class=mi>901</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><h4 id=text-index>Text Index</h4><p>If we create an index on data as <code>text</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>b_a_text</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>(((</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>c_b_text</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>(((</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=p>)));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>vacuum</span><span class=w> </span><span class=k>analyze</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>explain</span><span class=w> </span><span class=k>analyse</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                         </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-----------------------------------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=n>Hash</span><span class=w> </span><span class=k>Left</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>317</span><span class=p>.</span><span class=mi>31</span><span class=p>..</span><span class=mi>857</span><span class=p>.</span><span class=mi>16</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>2500</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>192</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>158</span><span class=p>.</span><span class=mi>851</span><span class=p>..</span><span class=mi>300</span><span class=p>.</span><span class=mi>858</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>8</span><span class=p>.</span><span class=mi>31</span><span class=p>..</span><span class=mi>273</span><span class=p>.</span><span class=mi>04</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>158</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>127</span><span class=p>..</span><span class=mi>142</span><span class=p>.</span><span class=mi>084</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>234</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>012</span><span class=p>..</span><span class=mi>67</span><span class=p>.</span><span class=mi>688</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>8</span><span class=p>.</span><span class=mi>30</span><span class=p>..</span><span class=mi>8</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>071</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>090</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>1024</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>9</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>c_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>8</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>023</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>041</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>184</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>184</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>34</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>158</span><span class=p>.</span><span class=mi>673</span><span class=p>..</span><span class=mi>158</span><span class=p>.</span><span class=mi>692</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>16384</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>773</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>184</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>34</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>012</span><span class=p>..</span><span class=mi>75</span><span class=p>.</span><span class=mi>828</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Planning</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>302</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Execution</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>301</span><span class=p>.</span><span class=mi>021</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>-</span><span class=p>[</span><span class=w> </span><span class=n>RECORD</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>]</span><span class=c1>--------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=mi>685</span><span class=n>c304c</span><span class=o>-</span><span class=mi>2</span><span class=n>ce0</span><span class=o>-</span><span class=mi>4</span><span class=n>e08</span><span class=o>-</span><span class=mi>8</span><span class=n>b97</span><span class=o>-</span><span class=mi>4</span><span class=n>b32d6dd4e78</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;b&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;e907b6c8-a41a-47d2-b312-4f118d69c030&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>e907b6c8</span><span class=o>-</span><span class=n>a41a</span><span class=o>-</span><span class=mi>47</span><span class=n>d2</span><span class=o>-</span><span class=n>b312</span><span class=o>-</span><span class=mi>4</span><span class=n>f118d69c030</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;a&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>acfa1f62</span><span class=o>-</span><span class=n>c271</span><span class=o>-</span><span class=mi>4</span><span class=n>ad4</span><span class=o>-</span><span class=mi>9</span><span class=n>daf</span><span class=o>-</span><span class=mi>818</span><span class=n>c4921fb0e</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>8</span><span class=p>.</span><span class=mi>894</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><p>Getting all <code>a</code> relations:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>explain</span><span class=w> </span><span class=k>analyze</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                                  </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>----------------------------------------------------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=k>Aggregate</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>764</span><span class=p>.</span><span class=mi>24</span><span class=p>..</span><span class=mi>764</span><span class=p>.</span><span class=mi>25</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>1038</span><span class=p>.</span><span class=mi>579</span><span class=p>..</span><span class=mi>1038</span><span class=p>.</span><span class=mi>680</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Merge</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>270</span><span class=p>.</span><span class=mi>74</span><span class=p>..</span><span class=mi>757</span><span class=p>.</span><span class=mi>99</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>2500</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>333</span><span class=p>.</span><span class=mi>769</span><span class=p>..</span><span class=mi>903</span><span class=p>.</span><span class=mi>920</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>Merge</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>c_b_text</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>331</span><span class=p>.</span><span class=mi>29</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>63</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>029</span><span class=p>..</span><span class=mi>74</span><span class=p>.</span><span class=mi>342</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Sort</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>270</span><span class=p>.</span><span class=mi>45</span><span class=p>..</span><span class=mi>270</span><span class=p>.</span><span class=mi>58</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>333</span><span class=p>.</span><span class=mi>589</span><span class=p>..</span><span class=mi>467</span><span class=p>.</span><span class=mi>134</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Sort</span><span class=w> </span><span class=k>Key</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Sort</span><span class=w> </span><span class=k>Method</span><span class=p>:</span><span class=w> </span><span class=n>quicksort</span><span class=w>  </span><span class=n>Memory</span><span class=p>:</span><span class=w> </span><span class=mi>1791</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>4</span><span class=p>.</span><span class=mi>32</span><span class=p>..</span><span class=mi>269</span><span class=p>.</span><span class=mi>04</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>148</span><span class=p>..</span><span class=mi>245</span><span class=p>.</span><span class=mi>843</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>234</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>023</span><span class=p>..</span><span class=mi>70</span><span class=p>.</span><span class=mi>893</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=p>..</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>077</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>097</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>1024</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>9</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=k>Only</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>a_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>022</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>043</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                 </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                 </span><span class=n>Heap</span><span class=w> </span><span class=n>Fetches</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Planning</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>240</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Execution</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>1038</span><span class=p>.</span><span class=mi>838</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=mi>17</span><span class=w> </span><span class=k>rows</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>1039</span><span class=p>.</span><span class=mi>818</span><span class=w> </span><span class=n>ms</span><span class=w> </span><span class=p>(</span><span class=mi>00</span><span class=p>:</span><span class=mi>01</span><span class=p>.</span><span class=mi>040</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>-</span><span class=p>[</span><span class=w> </span><span class=n>RECORD</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>count</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>19999</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>60</span><span class=p>.</span><span class=mi>985</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><p>In this case it doesn&rsquo;t seem like the index is even useful, as we are getting a value similiar to the baseline.</p><h4 id=uuid-index>UUID Index</h4><p>If we create an index on data as <code>uuid</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>create</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>b_a_uuid</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>(((</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>create</span><span class=w> </span><span class=k>index</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=k>not</span><span class=w> </span><span class=k>exists</span><span class=w> </span><span class=n>c_b_uuid</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>(((</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=p>));</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>vacuum</span><span class=w> </span><span class=k>analyze</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>explain</span><span class=w> </span><span class=k>analyze</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                      </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-----------------------------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=n>Nested</span><span class=w> </span><span class=n>Loop</span><span class=w> </span><span class=k>Left</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>87</span><span class=p>..</span><span class=mi>16</span><span class=p>.</span><span class=mi>98</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>192</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>146</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>293</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Nested</span><span class=w> </span><span class=n>Loop</span><span class=w> </span><span class=k>Left</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>58</span><span class=p>..</span><span class=mi>16</span><span class=p>.</span><span class=mi>61</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>158</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>094</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>177</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>c_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>8</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>023</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>045</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>b_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>8</span><span class=p>.</span><span class=mi>31</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>026</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>037</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>((</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>a_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>37</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>34</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>020</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>032</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Planning</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>258</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Execution</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>366</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=mi>10</span><span class=w> </span><span class=k>rows</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=k>c</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;685c304c-2ce0-4e08-8b97-4b32d6dd4e78&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>-</span><span class=p>[</span><span class=w> </span><span class=n>RECORD</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>]</span><span class=c1>--------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=mi>685</span><span class=n>c304c</span><span class=o>-</span><span class=mi>2</span><span class=n>ce0</span><span class=o>-</span><span class=mi>4</span><span class=n>e08</span><span class=o>-</span><span class=mi>8</span><span class=n>b97</span><span class=o>-</span><span class=mi>4</span><span class=n>b32d6dd4e78</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;b&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;e907b6c8-a41a-47d2-b312-4f118d69c030&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>e907b6c8</span><span class=o>-</span><span class=n>a41a</span><span class=o>-</span><span class=mi>47</span><span class=n>d2</span><span class=o>-</span><span class=n>b312</span><span class=o>-</span><span class=mi>4</span><span class=n>f118d69c030</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;a&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#34;</span><span class=p>,</span><span class=w> </span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>id</span><span class=w>   </span><span class=o>|</span><span class=w> </span><span class=n>acfa1f62</span><span class=o>-</span><span class=n>c271</span><span class=o>-</span><span class=mi>4</span><span class=n>ad4</span><span class=o>-</span><span class=mi>9</span><span class=n>daf</span><span class=o>-</span><span class=mi>818</span><span class=n>c4921fb0e</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>data</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=err>{</span><span class=s2>&#34;foo&#34;</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;foobar&#34;</span><span class=err>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>.</span><span class=mi>044</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><p>Getting all <code>a</code> relations:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>explain</span><span class=w> </span><span class=k>analyze</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                            </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>----------------------------------------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=k>Aggregate</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>927</span><span class=p>.</span><span class=mi>33</span><span class=p>..</span><span class=mi>927</span><span class=p>.</span><span class=mi>34</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>974</span><span class=p>.</span><span class=mi>052</span><span class=p>..</span><span class=mi>974</span><span class=p>.</span><span class=mi>152</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>463</span><span class=p>.</span><span class=mi>31</span><span class=p>..</span><span class=mi>902</span><span class=p>.</span><span class=mi>33</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>179</span><span class=p>.</span><span class=mi>660</span><span class=p>..</span><span class=mi>836</span><span class=p>.</span><span class=mi>708</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(((</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>459</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>723</span><span class=p>.</span><span class=mi>01</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>63</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>179</span><span class=p>.</span><span class=mi>555</span><span class=p>..</span><span class=mi>492</span><span class=p>.</span><span class=mi>140</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Hash</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(((</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>234</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>63</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>014</span><span class=p>..</span><span class=mi>68</span><span class=p>.</span><span class=mi>855</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>334</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>334</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>179</span><span class=p>.</span><span class=mi>496</span><span class=p>..</span><span class=mi>179</span><span class=p>.</span><span class=mi>514</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>16384</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>1212</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Seq</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>00</span><span class=p>..</span><span class=mi>334</span><span class=p>.</span><span class=mi>00</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>034</span><span class=p>..</span><span class=mi>100</span><span class=p>.</span><span class=mi>641</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=n>Filter</span><span class=p>:</span><span class=w> </span><span class=p>(((</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Hash</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=p>..</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>070</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>089</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Buckets</span><span class=p>:</span><span class=w> </span><span class=mi>1024</span><span class=w>  </span><span class=n>Batches</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=w>  </span><span class=n>Memory</span><span class=w> </span><span class=k>Usage</span><span class=p>:</span><span class=w> </span><span class=mi>9</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=k>Only</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>a_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>4</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>025</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>043</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=n>Heap</span><span class=w> </span><span class=n>Fetches</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Planning</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>374</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Execution</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>974</span><span class=p>.</span><span class=mi>242</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=mi>17</span><span class=w> </span><span class=k>rows</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>975</span><span class=p>.</span><span class=mi>312</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><p>In this case the planner is deciding to use a <code>Hash Right Join</code> which is suspicious.</p><p>Trying the same query with hashjoin disabled:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>set</span><span class=w> </span><span class=n>enable_hashjoin</span><span class=o>=</span><span class=k>off</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>explain</span><span class=w> </span><span class=k>analyze</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                             </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-------------------------------------------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=n>Nested</span><span class=w> </span><span class=n>Loop</span><span class=w> </span><span class=k>Left</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>86</span><span class=p>..</span><span class=mi>1169</span><span class=p>.</span><span class=mi>87</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>192</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>160</span><span class=p>..</span><span class=mi>777</span><span class=p>.</span><span class=mi>422</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=k>Join</span><span class=w> </span><span class=n>Filter</span><span class=p>:</span><span class=w> </span><span class=p>(((</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>a_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>2</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>34</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>031</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>046</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Merge</span><span class=w> </span><span class=k>Left</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>57</span><span class=p>..</span><span class=mi>967</span><span class=p>.</span><span class=mi>57</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>158</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>089</span><span class=p>..</span><span class=mi>460</span><span class=p>.</span><span class=mi>686</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>Merge</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>((</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>b_aa_uuid</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>372</span><span class=p>.</span><span class=mi>29</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>024</span><span class=p>..</span><span class=mi>85</span><span class=p>.</span><span class=mi>402</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(((</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>))::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>c_b_uuid</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>295</span><span class=p>.</span><span class=mi>29</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>022</span><span class=p>..</span><span class=mi>73</span><span class=p>.</span><span class=mi>415</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Planning</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>262</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Execution</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>912</span><span class=p>.</span><span class=mi>839</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=mi>11</span><span class=w> </span><span class=k>rows</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=p>(</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=p>(</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=p>)::</span><span class=n>uuid</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=o>-</span><span class=p>[</span><span class=w> </span><span class=n>RECORD</span><span class=w> </span><span class=mi>1</span><span class=w> </span><span class=p>]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>count</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=mi>19999</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>57</span><span class=p>.</span><span class=mi>294</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><p>Disabling <code>hashjoin</code> also improves the performance in case where we are using <code>text</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>explain</span><span class=w> </span><span class=k>analyse</span><span class=w> </span><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                                                   </span><span class=n>QUERY</span><span class=w> </span><span class=n>PLAN</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>------------------------------------------------------------------------------------------------------------------------------------------------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=k>Aggregate</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>856</span><span class=p>.</span><span class=mi>31</span><span class=p>..</span><span class=mi>856</span><span class=p>.</span><span class=mi>32</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>8</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>1025</span><span class=p>.</span><span class=mi>381</span><span class=p>..</span><span class=mi>1025</span><span class=p>.</span><span class=mi>522</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Merge</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>398</span><span class=p>.</span><span class=mi>81</span><span class=p>..</span><span class=mi>850</span><span class=p>.</span><span class=mi>06</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>2500</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>326</span><span class=p>.</span><span class=mi>140</span><span class=p>..</span><span class=mi>890</span><span class=p>.</span><span class=mi>957</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=n>Merge</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;b&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>c_b_text</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>295</span><span class=p>.</span><span class=mi>29</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>63</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>036</span><span class=p>..</span><span class=mi>72</span><span class=p>.</span><span class=mi>234</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>         </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Sort</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>398</span><span class=p>.</span><span class=mi>52</span><span class=p>..</span><span class=mi>398</span><span class=p>.</span><span class=mi>65</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>326</span><span class=p>.</span><span class=mi>058</span><span class=p>..</span><span class=mi>460</span><span class=p>.</span><span class=mi>792</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>19999</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Sort</span><span class=w> </span><span class=k>Key</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=n>Sort</span><span class=w> </span><span class=k>Method</span><span class=p>:</span><span class=w> </span><span class=n>quicksort</span><span class=w>  </span><span class=n>Memory</span><span class=p>:</span><span class=w> </span><span class=mi>1791</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>               </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Merge</span><span class=w> </span><span class=k>Right</span><span class=w> </span><span class=k>Join</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>1</span><span class=p>.</span><span class=mi>60</span><span class=p>..</span><span class=mi>397</span><span class=p>.</span><span class=mi>11</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>50</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>141</span><span class=p>..</span><span class=mi>239</span><span class=p>.</span><span class=mi>702</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=n>Merge</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=w> </span><span class=o>-&gt;&gt;</span><span class=w> </span><span class=s1>&#39;a&#39;</span><span class=p>::</span><span class=nb>text</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>((</span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>b_a_text</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>295</span><span class=p>.</span><span class=mi>29</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>79</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>024</span><span class=p>..</span><span class=mi>76</span><span class=p>.</span><span class=mi>033</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>10000</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                     </span><span class=o>-&gt;</span><span class=w>  </span><span class=n>Sort</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>1</span><span class=p>.</span><span class=mi>31</span><span class=p>..</span><span class=mi>1</span><span class=p>.</span><span class=mi>32</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>080</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>105</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=n>Sort</span><span class=w> </span><span class=k>Key</span><span class=p>:</span><span class=w> </span><span class=p>((</span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>)::</span><span class=nb>text</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=n>Sort</span><span class=w> </span><span class=k>Method</span><span class=p>:</span><span class=w> </span><span class=n>quicksort</span><span class=w>  </span><span class=n>Memory</span><span class=p>:</span><span class=w> </span><span class=mi>25</span><span class=n>kB</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                           </span><span class=o>-&gt;</span><span class=w>  </span><span class=k>Index</span><span class=w> </span><span class=k>Only</span><span class=w> </span><span class=n>Scan</span><span class=w> </span><span class=k>using</span><span class=w> </span><span class=n>a_pkey</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>a</span><span class=w>  </span><span class=p>(</span><span class=n>cost</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>29</span><span class=p>..</span><span class=mi>1</span><span class=p>.</span><span class=mi>30</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>width</span><span class=o>=</span><span class=mi>16</span><span class=p>)</span><span class=w> </span><span class=p>(</span><span class=n>actual</span><span class=w> </span><span class=n>time</span><span class=o>=</span><span class=mi>0</span><span class=p>.</span><span class=mi>029</span><span class=p>..</span><span class=mi>0</span><span class=p>.</span><span class=mi>048</span><span class=w> </span><span class=k>rows</span><span class=o>=</span><span class=mi>1</span><span class=w> </span><span class=n>loops</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                 </span><span class=k>Index</span><span class=w> </span><span class=n>Cond</span><span class=p>:</span><span class=w> </span><span class=p>(</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>::</span><span class=n>uuid</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>                                 </span><span class=n>Heap</span><span class=w> </span><span class=n>Fetches</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Planning</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>.</span><span class=mi>371</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=n>Execution</span><span class=w> </span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>1025</span><span class=p>.</span><span class=mi>622</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=mi>18</span><span class=w> </span><span class=k>rows</span><span class=p>)</span><span class=w>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>select</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>a</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>b</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;a&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>left</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=k>c</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=k>c</span><span class=p>.</span><span class=k>data</span><span class=o>-&gt;&gt;</span><span class=s1>&#39;b&#39;</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>b</span><span class=p>.</span><span class=n>id</span><span class=p>::</span><span class=nb>text</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>where</span><span class=w> </span><span class=n>a</span><span class=p>.</span><span class=n>id</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;acfa1f62-c271-4ad4-9daf-818c4921fb0e&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w> </span><span class=k>count</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c1>-------
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=w> </span><span class=mi>19999</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>(</span><span class=mi>1</span><span class=w> </span><span class=k>row</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>Time</span><span class=p>:</span><span class=w> </span><span class=mi>51</span><span class=p>.</span><span class=mi>609</span><span class=w> </span><span class=n>ms</span><span class=w>
</span></span></span></code></pre></div><p>Massive improvement with the uuid index. 1.044ms vs 8.894 ms which is way faster and we&rsquo;re fully utilising the index we just created.</p><p>However, when getting all <code>a</code> relations, performance wise it is similar when <code>hashjoin</code> is disabled. The <a href=https://heap.io/blog/when-to-avoid-jsonb-in-a-postgresql-schema>lack of column statistics for JSONB</a> columns may be the culprit here.</p><h4 id=conclusion>Conclusion</h4><p>Using the built-in type <code>UUID</code> is more efficient at the cost of a slightly more complicated query writing, with the extra benefit of avoiding handling possible pitfalls when comparing <code>UUID</code>s.</p></div></article></main></div></div><footer class=footer><div class=container><div class=footer-content><span>&copy; 2025 Jose Coelho</span></div></div></footer><script src=https://www.jacoelho.com/js/bundle.min.c687f63d8e204d7466c7c9609ec6f61b44c1217490b36198e5f77ee3befc11ea.js integrity="sha256-xof2PY4gTXRmx8lgnsb2G0TBIXSQs2GY5fd+4778Eeo=" crossorigin=anonymous></script></body></html>