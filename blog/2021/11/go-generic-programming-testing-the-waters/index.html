<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content="map[name:Jose Coelho]"><meta name=description content="Ramblings about software engineering"><meta name=keywords content="go,golang,kubernetes,ansible,chef,kafka,docker,containers"><link rel=canonical href=https://www.jacoelho.com/blog/2021/11/go-generic-programming-testing-the-waters/><title>Go Generic Programming - Testing the waters :: Posts</title><link rel=stylesheet href=https://www.jacoelho.com/css/main.min.119ac2c18046a4ef9e7705b9cd71e1fc8cbe5a5139a1234cfdae109d1baedb3c.css integrity="sha256-EZrCwYBGpO+edwW5zXHh/Iy+WlE5oSNM/a4QnRuu2zw=" crossorigin=anonymous><meta itemprop=name content="Go Generic Programming - Testing the waters"><meta itemprop=description content="Go Type Parameters Proposal is expected to be implemented with Go 1.18 early 2022.
The Very high level overview section contains a nice overview of what to expect.
If you have seen generics in other languages perhaps the most curious differences (other than using square brackets), are union types:
type SignedIntegers interface { int | int8 | int16 | int32 | int64 } Similar in syntax to scala3/dotty union types, although in Go is only allowed in constraints. The type set of this union element is the set {int, int8, int16, int32, int64}."><meta itemprop=datePublished content="2021-11-29T10:00:00+00:00"><meta itemprop=dateModified content="2021-11-29T10:00:00+00:00"><meta itemprop=wordCount content="346"><meta itemprop=keywords content="Go,Golang,Generics"><meta property="og:url" content="https://www.jacoelho.com/blog/2021/11/go-generic-programming-testing-the-waters/"><meta property="og:site_name" content="Posts"><meta property="og:title" content="Go Generic Programming - Testing the waters"><meta property="og:description" content="Go Type Parameters Proposal is expected to be implemented with Go 1.18 early 2022.
The Very high level overview section contains a nice overview of what to expect.
If you have seen generics in other languages perhaps the most curious differences (other than using square brackets), are union types:
type SignedIntegers interface { int | int8 | int16 | int32 | int64 } Similar in syntax to scala3/dotty union types, although in Go is only allowed in constraints. The type set of this union element is the set {int, int8, int16, int32, int64}."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2021-11-29T10:00:00+00:00"><meta property="article:modified_time" content="2021-11-29T10:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Go Generic Programming - Testing the waters"><meta name=twitter:description content="Go Type Parameters Proposal is expected to be implemented with Go 1.18 early 2022.
The Very high level overview section contains a nice overview of what to expect.
If you have seen generics in other languages perhaps the most curious differences (other than using square brackets), are union types:
type SignedIntegers interface { int | int8 | int16 | int32 | int64 } Similar in syntax to scala3/dotty union types, although in Go is only allowed in constraints. The type set of this union element is the set {int, int8, int16, int32, int64}."><meta property="article:published_time" content="2021-11-29 10:00:00 +0000 UTC"><meta property="article:section" content="go"><meta property="article:section" content="golang"><meta property="article:section" content="generics"></head><body><header class=header><div class=container><div class=header-inner><a href=https://www.jacoelho.com/ class=logo>Jose Coelho</a><nav class=nav><ul class=menu><li class=menu-item><a href=https://www.jacoelho.com/about/>About</a></li></ul><button class=menu-trigger aria-label="Toggle menu" aria-expanded=false>
<svg width="24" height="24"><use href="https://www.jacoelho.com/icons.svg#menu"/></svg>
</button>
<button class=theme-toggle aria-label="Toggle theme">
<svg class="theme-icon-light" width="20" height="20"><use href="https://www.jacoelho.com/icons.svg#sun"/></svg>
<svg class="theme-icon-dark" width="20" height="20"><use href="https://www.jacoelho.com/icons.svg#moon"/></svg>
</button>
<a href=https://www.jacoelho.com/index.xml class=rss-link target=_blank rel=noopener aria-label=RSS><svg width="20" height="20"><use href="https://www.jacoelho.com/icons.svg#rss"/></svg></a></nav></div></div></header><div class=container><div class=content><main class=post><article><header class=post-header><h1 class=post-title>Go Generic Programming - Testing the waters</h1><div class=post-meta><span class=post-meta-item><time datetime=2021-11-29>November 29, 2021</time></span></div></header><div class=post-content><p>Go <a href=https://go.googlesource.com/proposal/+/refs/heads/master/design/43651-type-parameters.md>Type Parameters Proposal</a> is expected to be implemented with Go 1.18 early 2022.</p><p>The <code>Very high level overview</code> section contains a nice overview of what to expect.</p><p>If you have seen generics in other languages perhaps the most curious differences (other than using square brackets), are union types:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span><span class=w> </span><span class=nx>SignedIntegers</span><span class=w> </span><span class=kd>interface</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=kt>int</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=kt>int8</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=kt>int16</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=kt>int32</span><span class=w> </span><span class=p>|</span><span class=w> </span><span class=kt>int64</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Similar in syntax to scala3/dotty union types, although in Go is only allowed in constraints. The type set of this union element is the set {int, int8, int16, int32, int64}.</p><p>Another interesting difference is the Approximation Constraint, written as <code>~T</code>. The type set of <code>~T</code> is the set of all types whose underlying type is <code>T</code>.</p><h2 id=testing-the-waters>Testing the waters</h2><p>A <code>map</code> function can be written as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span><span class=w> </span><span class=nx>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kn>import</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=s>&#34;fmt&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>func</span><span class=w> </span><span class=nx>mapFunc</span><span class=p>[</span><span class=nx>A</span><span class=w> </span><span class=kt>any</span><span class=p>,</span><span class=w> </span><span class=nx>B</span><span class=w> </span><span class=kt>any</span><span class=p>,</span><span class=w> </span><span class=nx>F</span><span class=w> </span><span class=kd>func</span><span class=p>(</span><span class=nx>A</span><span class=p>)</span><span class=w> </span><span class=nx>B</span><span class=p>,</span><span class=w> </span><span class=nx>S</span><span class=w> </span><span class=p>~[]</span><span class=nx>A</span><span class=p>](</span><span class=nx>f</span><span class=w> </span><span class=nx>F</span><span class=p>,</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=nx>S</span><span class=p>)</span><span class=w> </span><span class=p>[]</span><span class=nx>B</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>if</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=kc>nil</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=k>return</span><span class=w> </span><span class=kc>nil</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>res</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nb>make</span><span class=p>([]</span><span class=nx>B</span><span class=p>,</span><span class=w> </span><span class=mi>0</span><span class=p>,</span><span class=w> </span><span class=nb>len</span><span class=p>(</span><span class=nx>a</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>for</span><span class=w> </span><span class=nx>_</span><span class=p>,</span><span class=w> </span><span class=nx>e</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=k>range</span><span class=w> </span><span class=nx>a</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=nx>res</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=nb>append</span><span class=p>(</span><span class=nx>res</span><span class=p>,</span><span class=w> </span><span class=nf>f</span><span class=p>(</span><span class=nx>e</span><span class=p>))</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>return</span><span class=w> </span><span class=nx>res</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=kd>func</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=kd>type</span><span class=w> </span><span class=nx>User</span><span class=w> </span><span class=kd>struct</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=nx>ID</span><span class=w>   </span><span class=kt>int</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=nx>Name</span><span class=w> </span><span class=kt>string</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=p>}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>usernames</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=nf>mapFunc</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>u</span><span class=w> </span><span class=nx>User</span><span class=p>)</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=nx>u</span><span class=p>.</span><span class=nx>Name</span><span class=w> </span><span class=p>},</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>[]</span><span class=nx>User</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>				</span><span class=nx>ID</span><span class=p>:</span><span class=w>   </span><span class=mi>1</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>				</span><span class=nx>Name</span><span class=p>:</span><span class=w> </span><span class=s>&#34;Foo&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>},</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>				</span><span class=nx>ID</span><span class=p>:</span><span class=w>   </span><span class=mi>2</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>				</span><span class=nx>Name</span><span class=p>:</span><span class=w> </span><span class=s>&#34;Bar&#34;</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>},</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>})</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>usernames</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div><p>Go can infer types, allowing us to omit them, which helps readability.</p><h2 id=collections>Collections</h2><p>So far few new packages have been added around generics:</p><ul><li><a href=https://github.com/golang/exp/tree/master/maps>https://github.com/golang/exp/tree/master/maps</a></li><li><a href=https://github.com/golang/exp/tree/master/slices>https://github.com/golang/exp/tree/master/slices</a></li></ul><p>Seems like authors are cautious around what to add. One would expect to see the usual suspects <code>map</code>, <code>filter</code> and <code>reduce</code> and a <code>collections</code> package, perhaps something the community will fill in.</p><h2 id=final-thoughts>Final Thoughts</h2><p>Generics is going to remove a lot of code duplication at the cost of increased cognitive load parsing function signatures.</p><p>I am curious to see:</p><ul><li><p>If some patterns will emerge around naming types</p></li><li><p>How to define constraints, eg for <code>F</code>:</p><ul><li><code>func mapFunc[A any, B any, F func(A) B, S ~[]A](f F, a S) []B</code></li><li><code>func mapFunc[A any, B any, S ~[]A](f func(A) B, a S) []B</code></li></ul></li></ul><p>Perhaps something <code>go fmt</code> could &ldquo;fix&rdquo;.</p></div><div class=post-categories><a href=https://www.jacoelho.com/categories/go class=category>go</a>
<a href=https://www.jacoelho.com/categories/golang class=category>golang</a>
<a href=https://www.jacoelho.com/categories/generics class=category>generics</a></div></article></main></div></div><footer class=footer><div class=container><div class=footer-content><span>&copy; 2025 Jose Coelho</span></div></div></footer><script src=https://www.jacoelho.com/js/bundle.min.2868f841c78e77d7b473d034a52bb46f21b12eef84caba5767ed9a65576ecb3c.js integrity="sha256-KGj4QceOd9e0c9A0pSu0byGxLu+EyrpXZ+2aZVduyzw=" crossorigin=anonymous></script></body></html>